{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\htham\\\\Documents\\\\Revature\\\\InfoSysTraining\\\\project_2_trackr\\\\revProj2\\\\frontend\\\\revproj2\\\\src\\\\Components\\\\Inbox\\\\NotiViewerNew.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { getUserByUsername, usernameifAuthorized, getTrackers } from \"../../API/Axios\";\nimport { Line } from \"react-chartjs-2\";\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from \"chart.js\";\nimport PostFeedSmart from \"../PostFeed/PostFeedSmart\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\n;\nconst NotiViewerNew = ({\n  goalId,\n  clicked\n}) => {\n  _s();\n  const [trackers, setTrackers] = useState([]);\n  const [datavis, setDatavis] = useState({\n    trackDate: [],\n    burnedCal: [],\n    duration: [],\n    volume: [],\n    carb: [],\n    fat: [],\n    kal: [],\n    protein: [],\n    weight: [],\n    sleep: [],\n    water: []\n  });\n  const [view, setView] = useState(false);\n  const [userId, setUserId] = useState(0);\n  useEffect(() => {\n    const fetchData = async () => {\n      let username = await usernameifAuthorized();\n      let user = await getUserByUsername(username);\n      setUserId(user.id);\n      let trackers = await getTrackers(user.id, goalId);\n      setTrackers(trackers);\n    };\n    fetchData();\n  }, [goalId]);\n  useEffect(() => {\n    if (trackers.length) {\n      const newDatavis = {\n        trackDate: [],\n        burnedCal: [],\n        duration: [],\n        volume: [],\n        carb: [],\n        fat: [],\n        kal: [],\n        protein: [],\n        weight: [],\n        sleep: [],\n        water: []\n      };\n      trackers.forEach(tracker => {\n        newDatavis.trackDate.push(tracker.createdAt);\n        newDatavis.burnedCal.push(tracker.exercise.caloriesBurned);\n        newDatavis.duration.push(tracker.exercise.duration);\n        newDatavis.volume.push(tracker.exercise.volume);\n        newDatavis.carb.push(tracker.nutrition.carb);\n        newDatavis.fat.push(tracker.nutrition.fat);\n        newDatavis.kal.push(tracker.nutrition.kal);\n        newDatavis.protein.push(tracker.nutrition.protein);\n        newDatavis.weight.push(tracker.nutrition.weight);\n        newDatavis.sleep.push(tracker.sleep);\n        newDatavis.water.push(tracker.water);\n      });\n      setDatavis(newDatavis);\n    }\n  }, [trackers]);\n  const charts = datavis.trackDate.length ? Object.keys(datavis).filter(key => key !== \"trackDate\").map(key => {\n    const chartData = {\n      labels: datavis.trackDate,\n      datasets: [{\n        label: key,\n        data: datavis[key],\n        fill: false\n      }]\n    };\n    const chartOptions = {\n      responsive: true,\n      scales: {\n        x: {\n          type: \"category\"\n        },\n        y: {\n          type: \"linear\"\n        }\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: key\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(Line, {\n        data: chartData,\n        options: chartOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 27\n      }, this)]\n    }, key, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 23\n    }, this);\n  }) : null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [clicked && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: charts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 25\n    }, this), clicked && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setView(true),\n      children: \"Post about your Progress?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }, this), view && /*#__PURE__*/_jsxDEV(PostFeedSmart, {\n      userId: userId,\n      goalId: goalId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true);\n};\n_s(NotiViewerNew, \"3WDel8T+T8OGScomEh5JhJohX3o=\");\n_c = NotiViewerNew;\nexport default NotiViewerNew;\nvar _c;\n$RefreshReg$(_c, \"NotiViewerNew\");","map":{"version":3,"names":["React","useState","useEffect","getUserByUsername","usernameifAuthorized","getTrackers","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","PostFeedSmart","jsxDEV","_jsxDEV","Fragment","_Fragment","register","NotiViewerNew","goalId","clicked","_s","trackers","setTrackers","datavis","setDatavis","trackDate","burnedCal","duration","volume","carb","fat","kal","protein","weight","sleep","water","view","setView","userId","setUserId","fetchData","username","user","id","length","newDatavis","forEach","tracker","push","createdAt","exercise","caloriesBurned","nutrition","charts","Object","keys","filter","key","map","chartData","labels","datasets","label","data","fill","chartOptions","responsive","scales","x","type","y","children","fileName","_jsxFileName","lineNumber","columnNumber","options","onClick","_c","$RefreshReg$"],"sources":["C:/Users/htham/Documents/Revature/InfoSysTraining/project_2_trackr/revProj2/frontend/revproj2/src/Components/Inbox/NotiViewerNew.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { getUserByUsername, usernameifAuthorized, getTrackers } from \"../../API/Axios\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from \"chart.js\";\r\nimport PostFeedSmart from \"../PostFeed/PostFeedSmart\";\r\n\r\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\r\n\r\ninterface ViewerProp {\r\n    goalId: number;\r\n    clicked: boolean;\r\n}\r\n\r\ninterface DataVis {\r\n\t[key:string] : number[] | Date[];\r\n    trackDate: Date[];\r\n    burnedCal: number[];\r\n    duration: number[];\r\n    volume: number[];\r\n    carb: number[];\r\n    fat: number[];\r\n    kal: number[];\r\n    protein: number[];\r\n    weight: number[];\r\n    sleep: number[];\r\n    water: number[];\r\n};\r\n\r\nconst NotiViewerNew: React.FC<ViewerProp> = ({ goalId, clicked }) => {\r\n    const [trackers, setTrackers] = useState<any[]>([]);\r\n    const [datavis, setDatavis] = useState<DataVis>({\r\n        trackDate: [],\r\n        burnedCal: [],\r\n        duration: [],\r\n        volume: [],\r\n        carb: [],\r\n        fat: [],\r\n        kal: [],\r\n        protein: [],\r\n        weight: [],\r\n        sleep: [],\r\n        water: [],\r\n    });\r\n    const [view, setView] = useState(false);\r\n    const [userId, setUserId] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            let username = await usernameifAuthorized();\r\n            let user = await getUserByUsername(username);\r\n            setUserId(user.id);\r\n            let trackers = await getTrackers(user.id, goalId);\r\n            setTrackers(trackers);\r\n        };\r\n        fetchData();\r\n    }, [goalId]);\r\n\r\n    useEffect(() => {\r\n        if (trackers.length) {\r\n            const newDatavis : DataVis = {\r\n                trackDate: [],\r\n                burnedCal: [],\r\n                duration: [],\r\n                volume: [],\r\n                carb: [],\r\n                fat: [],\r\n                kal: [],\r\n                protein: [],\r\n                weight: [],\r\n                sleep: [],\r\n                water: [],\r\n            };\r\n\r\n            trackers.forEach((tracker: any) => {\r\n                newDatavis.trackDate.push(tracker.createdAt);\r\n                newDatavis.burnedCal.push(tracker.exercise.caloriesBurned);\r\n                newDatavis.duration.push(tracker.exercise.duration);\r\n                newDatavis.volume.push(tracker.exercise.volume);\r\n                newDatavis.carb.push(tracker.nutrition.carb);\r\n                newDatavis.fat.push(tracker.nutrition.fat);\r\n                newDatavis.kal.push(tracker.nutrition.kal);\r\n                newDatavis.protein.push(tracker.nutrition.protein);\r\n                newDatavis.weight.push(tracker.nutrition.weight);\r\n                newDatavis.sleep.push(tracker.sleep);\r\n                newDatavis.water.push(tracker.water);\r\n            });\r\n\r\n            setDatavis(newDatavis);\r\n        }\r\n    }, [trackers]);\r\n\r\n    const charts = datavis.trackDate.length\r\n        ? Object.keys(datavis)\r\n              .filter((key) => key !== \"trackDate\")\r\n              .map((key) => {\r\n                  const chartData = {\r\n                      labels: datavis.trackDate,\r\n                      datasets: [\r\n                          {\r\n                              label: key,\r\n                              data: datavis[key] as number[],\r\n                              fill: false,\r\n                          },\r\n                      ],\r\n                  };\r\n                  const chartOptions = {\r\n                      responsive: true,\r\n                      scales: {\r\n                          x: { type: \"category\" as const },\r\n                          y: { type: \"linear\" as const },\r\n                      },\r\n                  };\r\n                  return (\r\n                      <div key={key}>\r\n                          <h3>{key}</h3>\r\n                          <Line data={chartData} options={chartOptions} />\r\n                      </div>\r\n                  );\r\n              })\r\n        : null;\r\n\r\n    return (\r\n        <>\r\n            {clicked && <div>{charts}</div>}\r\n            {clicked && <button onClick={() => setView(true)}>Post about your Progress?</button>}\r\n            {view && <PostFeedSmart userId={userId} goalId={goalId} />}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default NotiViewerNew;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,iBAAiB,EAAEC,oBAAoB,EAAEC,WAAW,QAAQ,iBAAiB;AACtF,SAASC,IAAI,QAAQ,iBAAiB;AACtC,SAASC,KAAK,IAAIC,OAAO,EAAEC,aAAa,EAAEC,WAAW,EAAEC,YAAY,EAAEC,WAAW,EAAEC,KAAK,EAAEC,OAAO,EAAEC,MAAM,QAAQ,UAAU;AAC1H,OAAOC,aAAa,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEtDZ,OAAO,CAACa,QAAQ,CAACZ,aAAa,EAAEC,WAAW,EAAEC,YAAY,EAAEC,WAAW,EAAEC,KAAK,EAAEC,OAAO,EAAEC,MAAM,CAAC;AAoB9F;AAED,MAAMO,aAAmC,GAAGA,CAAC;EAAEC,MAAM;EAAEC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EACjE,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG1B,QAAQ,CAAQ,EAAE,CAAC;EACnD,MAAM,CAAC2B,OAAO,EAAEC,UAAU,CAAC,GAAG5B,QAAQ,CAAU;IAC5C6B,SAAS,EAAE,EAAE;IACbC,SAAS,EAAE,EAAE;IACbC,QAAQ,EAAE,EAAE;IACZC,MAAM,EAAE,EAAE;IACVC,IAAI,EAAE,EAAE;IACRC,GAAG,EAAE,EAAE;IACPC,GAAG,EAAE,EAAE;IACPC,OAAO,EAAE,EAAE;IACXC,MAAM,EAAE,EAAE;IACVC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE;EACX,CAAC,CAAC;EACF,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGzC,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAM,CAAC0C,MAAM,EAAEC,SAAS,CAAC,GAAG3C,QAAQ,CAAC,CAAC,CAAC;EAEvCC,SAAS,CAAC,MAAM;IACZ,MAAM2C,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B,IAAIC,QAAQ,GAAG,MAAM1C,oBAAoB,CAAC,CAAC;MAC3C,IAAI2C,IAAI,GAAG,MAAM5C,iBAAiB,CAAC2C,QAAQ,CAAC;MAC5CF,SAAS,CAACG,IAAI,CAACC,EAAE,CAAC;MAClB,IAAItB,QAAQ,GAAG,MAAMrB,WAAW,CAAC0C,IAAI,CAACC,EAAE,EAAEzB,MAAM,CAAC;MACjDI,WAAW,CAACD,QAAQ,CAAC;IACzB,CAAC;IACDmB,SAAS,CAAC,CAAC;EACf,CAAC,EAAE,CAACtB,MAAM,CAAC,CAAC;EAEZrB,SAAS,CAAC,MAAM;IACZ,IAAIwB,QAAQ,CAACuB,MAAM,EAAE;MACjB,MAAMC,UAAoB,GAAG;QACzBpB,SAAS,EAAE,EAAE;QACbC,SAAS,EAAE,EAAE;QACbC,QAAQ,EAAE,EAAE;QACZC,MAAM,EAAE,EAAE;QACVC,IAAI,EAAE,EAAE;QACRC,GAAG,EAAE,EAAE;QACPC,GAAG,EAAE,EAAE;QACPC,OAAO,EAAE,EAAE;QACXC,MAAM,EAAE,EAAE;QACVC,KAAK,EAAE,EAAE;QACTC,KAAK,EAAE;MACX,CAAC;MAEDd,QAAQ,CAACyB,OAAO,CAAEC,OAAY,IAAK;QAC/BF,UAAU,CAACpB,SAAS,CAACuB,IAAI,CAACD,OAAO,CAACE,SAAS,CAAC;QAC5CJ,UAAU,CAACnB,SAAS,CAACsB,IAAI,CAACD,OAAO,CAACG,QAAQ,CAACC,cAAc,CAAC;QAC1DN,UAAU,CAAClB,QAAQ,CAACqB,IAAI,CAACD,OAAO,CAACG,QAAQ,CAACvB,QAAQ,CAAC;QACnDkB,UAAU,CAACjB,MAAM,CAACoB,IAAI,CAACD,OAAO,CAACG,QAAQ,CAACtB,MAAM,CAAC;QAC/CiB,UAAU,CAAChB,IAAI,CAACmB,IAAI,CAACD,OAAO,CAACK,SAAS,CAACvB,IAAI,CAAC;QAC5CgB,UAAU,CAACf,GAAG,CAACkB,IAAI,CAACD,OAAO,CAACK,SAAS,CAACtB,GAAG,CAAC;QAC1Ce,UAAU,CAACd,GAAG,CAACiB,IAAI,CAACD,OAAO,CAACK,SAAS,CAACrB,GAAG,CAAC;QAC1Cc,UAAU,CAACb,OAAO,CAACgB,IAAI,CAACD,OAAO,CAACK,SAAS,CAACpB,OAAO,CAAC;QAClDa,UAAU,CAACZ,MAAM,CAACe,IAAI,CAACD,OAAO,CAACK,SAAS,CAACnB,MAAM,CAAC;QAChDY,UAAU,CAACX,KAAK,CAACc,IAAI,CAACD,OAAO,CAACb,KAAK,CAAC;QACpCW,UAAU,CAACV,KAAK,CAACa,IAAI,CAACD,OAAO,CAACZ,KAAK,CAAC;MACxC,CAAC,CAAC;MAEFX,UAAU,CAACqB,UAAU,CAAC;IAC1B;EACJ,CAAC,EAAE,CAACxB,QAAQ,CAAC,CAAC;EAEd,MAAMgC,MAAM,GAAG9B,OAAO,CAACE,SAAS,CAACmB,MAAM,GACjCU,MAAM,CAACC,IAAI,CAAChC,OAAO,CAAC,CACfiC,MAAM,CAAEC,GAAG,IAAKA,GAAG,KAAK,WAAW,CAAC,CACpCC,GAAG,CAAED,GAAG,IAAK;IACV,MAAME,SAAS,GAAG;MACdC,MAAM,EAAErC,OAAO,CAACE,SAAS;MACzBoC,QAAQ,EAAE,CACN;QACIC,KAAK,EAAEL,GAAG;QACVM,IAAI,EAAExC,OAAO,CAACkC,GAAG,CAAa;QAC9BO,IAAI,EAAE;MACV,CAAC;IAET,CAAC;IACD,MAAMC,YAAY,GAAG;MACjBC,UAAU,EAAE,IAAI;MAChBC,MAAM,EAAE;QACJC,CAAC,EAAE;UAAEC,IAAI,EAAE;QAAoB,CAAC;QAChCC,CAAC,EAAE;UAAED,IAAI,EAAE;QAAkB;MACjC;IACJ,CAAC;IACD,oBACIxD,OAAA;MAAA0D,QAAA,gBACI1D,OAAA;QAAA0D,QAAA,EAAKd;MAAG;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACd9D,OAAA,CAACZ,IAAI;QAAC8D,IAAI,EAAEJ,SAAU;QAACiB,OAAO,EAAEX;MAAa;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA,GAF1ClB,GAAG;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAGR,CAAC;EAEd,CAAC,CAAC,GACN,IAAI;EAEV,oBACI9D,OAAA,CAAAE,SAAA;IAAAwD,QAAA,GACKpD,OAAO,iBAAIN,OAAA;MAAA0D,QAAA,EAAMlB;IAAM;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EAC9BxD,OAAO,iBAAIN,OAAA;MAAQgE,OAAO,EAAEA,CAAA,KAAMxC,OAAO,CAAC,IAAI,CAAE;MAAAkC,QAAA,EAAC;IAAyB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EACnFvC,IAAI,iBAAIvB,OAAA,CAACF,aAAa;MAAC2B,MAAM,EAAEA,MAAO;MAACpB,MAAM,EAAEA;IAAO;MAAAsD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA,eAC5D,CAAC;AAEX,CAAC;AAACvD,EAAA,CApGIH,aAAmC;AAAA6D,EAAA,GAAnC7D,aAAmC;AAsGzC,eAAeA,aAAa;AAAC,IAAA6D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}